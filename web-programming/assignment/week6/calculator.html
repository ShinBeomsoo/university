<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>201801776</title>
    <link rel="stylesheet" type="text/css" href="./calculator.css">
</head>
<body>
<table class="calculator" style="width: 400px; height: 400px; text-align: center;" border="1">
    <caption class="calculator-cation">계산기</caption>
    <tr style="height: 50px">
        <td colspan="5">
            <p style="height: 100%;" id="input-result"></p>
        </td>
    </tr>
    <tr style="height: 50px">
        <td colspan="5">
            <input style="width: 400px; height: 100%;" id="input-display">
        </td>
    </tr>
    <tr>
        <th onclick="calculate('7', null)" class="number">7</th>
        <th onclick="calculate('8', null)" class="number">8</th>
        <th onclick="calculate('9', null)" class="number">9</th>
        <th onclick="calculate(null, '/')" class="operator">÷</th>
        <td onclick="calculate(null, 'ce')" rowspan="2" class="operator">CE</td>
    </tr>
    <tr>
        <th onclick="calculate('4', null)" class="number">4</th>
        <th onclick="calculate('5', null)" class="number">5</th>
        <th onclick="calculate('6', null)" class="number">6</th>
        <th onclick="calculate(null, '*')" class="operator">X</th>
    </tr>
    <tr>
        <th onclick="calculate('1', null)" class="number">1</th>
        <th onclick="calculate('2', null)" class="number">2</th>
        <th onclick="calculate('3', null)" class="number">3</th>
        <th onclick="calculate(null, '-')" class="operator">-</th>
        <th onclick="calculate(null, '%')" class="operator">%</th>
    </tr>
    <tr>
        <td onclick="calculate('0', null)" colspan="3" class="number">0</td>
        <th onclick="calculate(null, '+')" class="operator">+</th>
        <th onclick="calculate(null, '=')" class="operator">=</th>
    </tr>
</table>
<script>
  let result = 0;
  const operator_action = {
    "=": calculate_result, "ce": clear,
  };

  function calculate(char, operator) {
    let display_value = document.getElementById('input-display');

    if (operator === '=' || operator === 'ce') {
      operator_action[operator]();
    } else if (operator != null) {
      display_value.value = display_value.value + operator;
    } else {
      display_value.value = display_value.value + char;
    }
  }

  function clear() {
    let display_value = document.getElementById('input-display');
    display_value.value = null;
    let result_value = document.getElementById('input-result');
    result_value.innerHTML = null;
    result = 0;
  }

  function calculate_result() {
    console.log("clear");
    let display_equation = document.getElementById('input-display');
    let display_result = document.getElementById('input-result');
    result = eval(display_equation.value);
    display_result.innerHTML = result;
  }
</script>
</body>
</html>
